var TimedKVS=function(t,e,i,n){var r=e.require=function(t){return e[t]};return"undefined"!=typeof exports&&(e[i]=exports),function(t){var e=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});var i;t("linked-kvs",["require","exports"],(function(t,e){var i=function(){function t(){this.latest=null,this.items={},this.length=0}return t.prototype.get=function(t){var e=this.getItem(t);if(e)return e.value},t.prototype.set=function(t,e){this.setItem(t,{value:e})},t.prototype.getItem=function(t){var e=this.items[t];if(e&&!e.deleted)return e},t.prototype.setItem=function(t,e){var i=e;this.delete(t),this.items[t]=i,this.length++,i.key=t;var n=this.latest;n&&(i.next=n.deleted?n.next:n),this.latest=i},t.prototype.size=function(){return this.length},t.prototype.shrink=function(t){for(var e=this.latest;e;){if(0>=t)return void this.truncate(e);e.deleted||t--,e=e.next}},t.prototype.delete=function(t){var e=this.getItem(t);e&&this._delete(e)},t.prototype._delete=function(t){if(t){t.deleted||(delete this.items[t.key],this.length--,t.key=t.value=null,t.deleted=!0);for(var e=t.next;e&&e.deleted;)e=t.next=e.next}},t.prototype.truncate=function(t){for(var e=t;e;)this._delete(e),e=e.next},t.prototype.all=function(){for(var t=[],e=this.latest;e;){if(!e.deleted){var i=this.getItem(e.key);i&&t.push(i)}e=e.next}return t.reverse()},t.prototype.keys=function(){return this.all().map((function(t){return t.key}))},t.prototype.values=function(){return this.all().map((function(t){return t.value}))},t}();e.LinkedKVS=i})),t("timed-kvs",["require","exports","linked-kvs"],(function(t,i,n){var r=function(t){var i=t.prototype;function n(e){var i=t.call(this)||this,n=e||{},r=n.expires,o=n.maxItems;return i.expires=r>0&&+r||0,i.maxItems=o>0&&+o||0,i}return e(n,t),n.prototype.getItem=function(t){var e=this.expires,n=i.getItem.call(this,t);if(n){if(e)if(Date.now()>n.ttl)return void this.truncate(n);return n}},n.prototype.setItem=function(t,e){var n=this,r=this,o=r.expires,s=r.maxItems;if(o){if(this.firstKey)!this.getItem(this.firstKey)&&(this.firstKey=void 0);else this.firstKey=t;var u=Date.now();e.ttl=u+o}if(i.setItem.call(this,t,e),s){if(this.gcTimeout||s>=this.size())return;var l=Math.min(s,1e3);this.gcTimeout=setTimeout((function(){n.shrink(s),delete n.gcTimeout}),l)}},n}(n.LinkedKVS);i.TimedKVS=r}))}((function(t,i,n){e.exports=e[t]||(e[t]={}),n.apply(null,i.map(r))})),e[i].TimedKVS}(0,{},"timed-kvs");